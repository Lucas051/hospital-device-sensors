@model Obligatorio2023.Models.Dispositivo

@{
    ViewData["Title"] = "Detalles";
}

<h1>Detalles</h1>

<div>
    <h4>Dispositivo</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Nombre)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Nombre)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Detalle)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Detalle)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.FechaHoraAlta)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.FechaHoraAlta)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.FechaHoraUltimaModificacion)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.FechaHoraUltimaModificacion)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Activo)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Activo)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.UPaciente)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.UPaciente.NombreApellido)
        </dd>

        <dt class="col-sm-2">
            Ultimo Reporte:
        </dt>
        <dd>
            <div id="ultimoDatoReporte"></div>
        </dd>
    </dl>
</div>

<script>
    function cargarUltimoDatoReporte() {
        $.ajax({
            url: '@Url.Action("ObtenerUltimoDatoReporte", "Dispositivos")',
            type: 'GET',
            data: { id: @Model.Id },
            dataType: 'html', // Cambia el tipo de datos a "html" ya que queremos obtener una vista parcial HTML
            success: function (data) {
                // Actualiza el contenido del div con id "ultimoDatoReporte" con la vista parcial recibida
                $("#ultimoDatoReporte").html(data);
            },
            error: function (error) {
                console.error(error);
            }
        });
    }

    // Ejecuta la función cada 2 segundos
    setInterval(cargarUltimoDatoReporte, 2000);
</script>


